name = 'Gilt-Leaf Archdruid'
cardnum = 0
expansion = 'Lorwyn'
type = characteristic('Creature')
supertype = characteristic('')
subtypes = characteristic(['Elf', 'Druid'])
cost = '3GG'
color = characteristic(['G'])
text = ['Whenever you play a Druid spell, you may draw a card.', 'Tap seven untapped Druids you control: Gain control of all lands target player controls.']

out_play_role.abilities = [CastPermanentSpell(card, cost)]
subrole = Creature(3, 3)

in_play_role = Permanent(card, subrole)

#################################

subrole.triggered_abilities = [TriggeredAbility(
  card,
  trigger = CardTrigger(event=PlaySpellEvent()),
  match_condition = CardMatch(
      lambda card, self=card: card.subtypes == "Druid" and card.controller == self.controller),
  ability = Ability(card, effects=YouMay(DrawCard(1))))]

target = Target(target_types=isPlayer)
subrole.abilities = [ActivatedAbility(
  card,
  TapCost(
      cardtype=isPermanent.with_condition(
          lambda c: c.subtypes == "Druid"),
      number=7),
  target=[target,
      AllPermanentTargets(target_types=isLand.with_condition(
      lambda a, t=target: a.controller==t.target))],     effects=[
      NullEffect(),
      ForEach(ChangeController(expire=True))], copy_targets=False)]

#################################